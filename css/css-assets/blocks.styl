// BLOCKS
@import '../assets/imports.styl'


.entrance
	width  455px
	height 292px
	background url('i/entrance.png')

.moon-n-text
	position relative
	display inline-block
	padding 0 88px 0 70px
	&.is-moon-only
		.moon-n-text--side
			transform translateY(-100px)
			opacity 0
		.moon--chart__1
			opacity 0
		&:before
			opacity 0
	.moon-n-text--side, .moon--chart__1, .moon:before
		transition all .5s linear
	.moon-n-text--side
		text-align center
		padding 35px 16px
		position absolute
	.moon-n-text--side__left
		left 0
		color #a5daf2
	.moon-n-text--side__right
		color #f6c855
		right 0
	.moon
		transform translateZ(0)

craterShadowColor = #b99a6b
.moon
	circle 102px
	retina 'i/moon' 100% #fad296
	position relative
	overflow hidden
	&:before
		content ''
		position absolute
		circle 100%
		nw 0
		background-color rgba(#f6c855, .58)
		z-index 1
		border-radius 50%
	// .moon--chart
	.moon--chart__1
		width 51%
		height 102%
		position absolute
		z-index 2
		nw -1px
		background-color rgba(#4b99bd, .78)
		border-top-left-radius  	100px
		border-bottom-left-radius 100px

	


/* fba4ecd90d2db7a0f9b5ed45a89284b6 */
baloonColor = #f1c74f
.baloon
	height 30*PX
	width 23*PX
	background-color baloonColor
	border-radius 50%
	position relative
	&:before
		content '#'
		position absolute
		color white
		font-size 14px
		PXX = norm(14)*PX
		nw 4*PXX
		font-family monospaced
		opacity .75

	svg
		position absolute
		top 100%
		left 0%
		stroke baloonColor
		stroke-width 1*PX

redColor = #ff6a6c
.baloon__is-red
	background redColor
	svg
		stroke redColor

greenColor = #299d9d
.baloon__is-green
	background greenColor
	svg
		stroke greenColor

PX = (1/16)em
.human
	background-color #6e6e6e
	border-radius 50%
	height 26*PX
	width 10*PX
	position relative
	&:after
		content ''
		position absolute
		rect 7*PX
		background-color inherit
		top - 5*PX
		border-radius 50%
		left 50%
		margin-left - 3*PX

ferrisWheelTransitionCoef = .3s
.ferris-base
	margin-left 50px
	position relative
	width 238*PX
	height 39*PX
	
	.ferris-base--main
		background-color #ce5250
		rect 100%
		position relative
		z-index 1
		height 0%
		top 100%

		.is-open &
			height 100%
			top 0
			transition all ferrisWheelTransitionCoef linear

	baseTopColor = #9b2e2e
	topWidth = 108%
	baseTopHeight = 12*PX
	top-height
	.ferris-base--top
		position absolute
		height baseTopHeight
		background-color baseTopColor
		z-index 2
		width 0
		margin-left 50%
		overflow hidden
		opacity 0

		.is-open &
			width topWidth
			margin-left -4%
			overflow visible
			opacity 1
			transition all ferrisWheelTransitionCoef linear
			transition-delay ferrisWheelTransitionCoef

		triangleWidth = 8*PX
		&:before, &:after
			content ''
			position absolute
			border baseTopHeight solid rgba(baseTopColor, 0)
			border-left-width  triangleWidth
			border-right-width triangleWidth
			border-top-color baseTopColor
			top 0

		&:before
			left  - triangleWidth

		&:after
			right - triangleWidth
		
	baseSpikeHeight = 185*PX
	baseSpikeWidth  = 15*PX
	.ferris-base--spike
		height baseSpikeHeight - 30*PX
		width baseSpikeWidth
		background-color #b33333
		position absolute
		top - baseSpikeHeight + 23*PX
		left 50%
		margin-left - (baseSpikeWidth/2)
		transform-origin 50% top
		z-index 0
		height (baseSpikeHeight/2)
		opacity 0
		
		translateSize = baseSpikeHeight
		&.is-1
			transform rotate(90deg) translateX(translateSize)
		&.is-2
			transform rotate(-90deg) translateX(- translateSize)

		.is-open &
			rotateAngle = 19deg
			transition all (1.5*ferrisWheelTransitionCoef) linear, opacity 0 linear
			transition-delay 2*ferrisWheelTransitionCoef
			height baseSpikeHeight
			opacity 1

			&.is-1
				transform rotate(rotateAngle)
			&.is-2
				transform rotate(- rotateAngle)
				
	.ferris-base--handle
		circle 30*PX
		background-color #ff6d6a
		position absolute
		left 50%
		margin-left - 15*PX
		top - baseSpikeHeight + 10*PX
		transform scale(0)

		.is-open &
			transform scale(1)
			transition all ferrisWheelTransitionCoef cubic-bezier(0.350, 1.650, 0.375, 0.790);
			transition-delay 4*ferrisWheelTransitionCoef

		size = 35%
		&:after
			content ''
			circle size
			center-shift size
			background-color #b72737	


spikeHeight = 38*PX
cabinSize = 44*PX
ferrisWheelSize = 375
/* 4a3bad0ec6b13193efca6723a150cfba */
.ferris-wheel
	rect ferrisWheelSize*PX
	position relative
	z-index 20

	.ferris-wheel--core
		animation-fill-mode both
		animation ferris-wheel-rotate 30s linear infinite

	.cabin--core
		animation-fill-mode both
		animation ferris-cabin-rotate 30s linear infinite

	&.is-open 
		// .ferris-wheel--core
		// 	animation ferris-wheel-rotate 30s linear infinite

		// .cabin--core
		// 	animation ferris-cabin-rotate 30s linear infinite

		.ferris-base
			transform translateY(0)
			transition all 0 linear

		.ferris-base--center
			transform scale(1)
			transition all ferrisWheelTransitionCoef cubic-bezier(0.350, 1.650, 0.375, 0.790);
			transition-delay 4.5*ferrisWheelTransitionCoef

		.ferris-wheel--circle2
			transform scale(1)
			transition all ferrisWheelTransitionCoef cubic-bezier(0.350, 1.650, 0.375, 0.790);
			transition-delay 5*ferrisWheelTransitionCoef

		.ferris-wheel--circle1
			transform scale(1)
			transition all ferrisWheelTransitionCoef cubic-bezier(0.350, 1.650, 0.375, 0.790);
			transition-delay 5.5*ferrisWheelTransitionCoef

		.ferris-wheel--spike
			transition all ferrisWheelTransitionCoef linear
			transition-delay 6*ferrisWheelTransitionCoef
			height spikeHeight
			opacity 1

			spikeAngle = 60
			spikesCircleSize = (ferrisWheelSize*.69)
			cnt = 24
			PI = 3.141598
			step = (2*PI)/cnt
			rotateStep = 360/cnt
			rotateAngle = 0
			centerX = (ferrisWheelSize/2) - 1
			centerY = (ferrisWheelSize/2) 
			radius 	= spikesCircleSize/2
			angle = 0
			for i in 0..(cnt - 1)
				&.n-{i}
					x = centerX + cos(angle)*radius
					y = centerY + sin(angle)*radius
					transform translateX(x*PX) translateY(y*PX - (spikeHeight/2)) rotate((rotateAngle - spikeAngle)deg)
					transform-origin 50% 50%
				
				rotateAngle = rotateAngle + rotateStep
				angle = angle + step
			
			rotateAngle = 0
			angle 			= .16
			for i in 0..(cnt - 1)
				&.s-{i}
					x = centerX + cos(angle)*radius
					y = centerY + sin(angle)*radius
					transform translateX(x*PX) translateY(y*PX - (spikeHeight/2)) rotate((rotateAngle + spikeAngle)deg)
					transform-origin 50% 50%
				
				rotateAngle = rotateAngle + rotateStep
				angle = angle + step

		.cabin
			opacity 1
			transition-duration 0

			cnt = 12
			PI = 3.141598
			step = (2*PI)/cnt
			rotateStep = 360/cnt
			rotateAngle = 0
			centerX = ferrisWheelSize/2
			centerY = ferrisWheelSize/2
			radius 	= ferrisWheelSize/2
			angle = 0
			.human
				transition top ferrisWheelTransitionCoef linear
			for i in 0..(cnt - 1)
				&.n-{i}
					.human-0
						top  - 5*PX
						left 20%
						transition-delay 7*ferrisWheelTransitionCoef + (random(0,25)/100)
					.human-1
						top  - random(0,5)*PX
						left 40%
						transition-delay 7*ferrisWheelTransitionCoef + (random(0,25)/100)
					.human-2
						top  - random(3,7)*PX
						left 60%
						transition-delay 7*ferrisWheelTransitionCoef + (random(0,25)/100)

		.cabin--handle
			height 40*PX
			transition all ferrisWheelTransitionCoef linear
			transition-delay 6*ferrisWheelTransitionCoef

		.cabin--core2
			transform scale(1)
			transition all ferrisWheelTransitionCoef linear
			transition-delay 6.5*ferrisWheelTransitionCoef

	.ferris-wheel--core
		rect 100%
		position absolute
		transform-origin 50% 50%

	.cabin--core
		transform-origin 50% 50%

	.ferris-base
		position absolute
		z-index 2
		left    20*PX
		bottom  - 15*PX
		transform translateY(300px)
		transition all ferrisWheelTransitionCoef line

	size = 115*PX
	.ferris-base--center
		background-color #ff6d6a
		circle size
		transform scale(0)
		z-index 0
		top - 222*PX
		position absolute
		left 50%
		margin-left - (size/2)
		
		iconSize = 67.5%
		.icon
			fill #fff
			rect iconSize
			left ((100% - iconSize)/1.65)
			top  ((100% - iconSize)/1.65)

	.ferris-wheel--spike
		width  3*PX
		height 0
		height spikeHeight
		background-color #9a3333
		position absolute
		z-index 0
		transform-origin 50% 50%
		opacity 0

		spikeAngle = 60
		spikesCircleSize = (ferrisWheelSize*.69)
		cnt = 24
		PI = 3.141598
		step = (2*PI)/cnt
		rotateStep = 360/cnt
		rotateAngle = 0
		centerX = (ferrisWheelSize/2) - 0
		centerY = (ferrisWheelSize/2)
		radius 	= (spikesCircleSize/2) - 15
		angle = 0
		for i in 0..(cnt - 1)
			&.n-{i}
				x = centerX + cos(angle)*radius
				y = centerY + sin(angle)*radius
				transform translateX(x*PX) translateY(y*PX - (spikeHeight/2)) rotate((rotateAngle)deg)
			
			rotateAngle = rotateAngle + rotateStep
			angle = angle + step
		
		rotateAngle = 0
		angle 			= .16
		for i in 0..(cnt - 1)
			&.s-{i}
				x = centerX + cos(angle)*radius
				y = centerY + sin(angle)*radius
				transform translateX(x*PX) translateY(y*PX - (spikeHeight/2)) rotate((rotateAngle)deg)
			
			rotateAngle = rotateAngle + rotateStep
			angle = angle + step


	circle1Size = 85%
	.ferris-wheel--circle1
		position absolute
		circle circle1Size
		border 17*PX solid #c94a4a
		left ((100% - circle1Size)/2)
		top  ((100% - circle1Size)/2)
		z-index 1
		transform scale(0)
		transition all ferrisWheelTransitionCoef linear
		transition-delay ferrisWheelTransitionCoef

	circle2Size = 65%
	.ferris-wheel--circle2
		position absolute
		circle circle2Size
		// border 10*PX solid #c94a4a
		border 10*PX solid white
		left ((100% - circle2Size)/2)
		top  ((100% - circle2Size)/2)
		z-index 1
		transform scale(0)
		transition all ferrisWheelTransitionCoef linear
		transition-delay 2*ferrisWheelTransitionCoef

	.cabin
		position absolute
		nw 0
		opacity 1
		// z-index 10

		.icon
			fill #3f797f
	
	cnt = 12
	PI = 3.141598
	step = (2*PI)/cnt
	rotateStep = 360/cnt
	rotateAngle = 0
	centerX = ferrisWheelSize/2
	centerY = ferrisWheelSize/2
	radius 	= ferrisWheelSize/2
	angle = 0
	for i in 0..(cnt - 1)
		.n-{i}
			x = centerX + cos(angle)*radius
			y = centerY + sin(angle)*radius
			transform translateX(x*PX - (cabinSize/2)) translateY(y*PX - (cabinSize/2))
			.cabin--handle
				transform rotate((90 + rotateAngle)deg)
				z-index -1
			.human
				position absolute
				top 12*PX

			.human-0
				left 20%
			.human-1
				left 40%
			.human-2
				left 60%
		.n-google-plus, .n-youtube, .n-quora
			.icon
				fill #f46f53
		.n-blogging
			.icon
				fill #8fa2a8
		rotateAngle = rotateAngle + rotateStep
		angle = angle + step

	// cnt = 12
	// PI = 3.141598
	// step = (2*PI)/cnt
	// rotateStep = 360/cnt
	// rotateAngle = 0
	// centerX = ferrisWheelSize/2
	// centerY = ferrisWheelSize/2
	// radius 	= ferrisWheelSize/2
	// angle = 0
	// for i in 0..(cnt - 1)
	// 	.n-{i}
	// 		x = centerX + cos(angle)*radius
	// 		y = centerY + sin(angle)*radius
	// 		transform translateX(x*PX - (cabinSize/2)) translateY(y*PX - (cabinSize/2))
	// 		.cabin--handle
	// 			transform rotate((90 + rotateAngle)deg)
	// 			z-index -1

	// 		.human
	// 			position absolute

	// 		.human-0
	// 			top  - 5*PX
	// 			left 20%

	// 		.human-1
	// 			top  - random(0,5)*PX
	// 			left 40%

	// 		.human-2
	// 			top  - random(3,7)*PX
	// 			left 60%

	// 	.n-google-plus, .n-youtube, .n-quora
	// 		.icon
	// 			fill #f46f53

	// 	.n-blogging
	// 		.icon
	// 			fill #8fa2a8

				

	// 	rotateAngle = rotateAngle + rotateStep
	// 	angle = angle + step


/* 6239f824e830fba76e14678064076891 */
.cabin
	// border-radius 50%
	rect cabinSize
	position relative
	.cabin--core, .cabin--core2
		rect 100%
		position absolute
		nw 0
	 .cabin--core2
		transform scale(0)
		transition all ferrisWheelTransitionCoef linear
		transition-delay 0

	.human
		z-index 0
		position absolute

	iconSize = 60%
	.icon
		position absolute
		z-index 2
		rect iconSize
		left ((100% - iconSize)/2)
		top  ((100% - iconSize)/2)

	cabinHandleWidth = 18*PX
	.cabin--handle
		background-color #9a3333
		width  cabinHandleWidth
		position absolute
		left 50%
		top  50%
		margin-left - (cabinHandleWidth/2)
		z-index 0
		transform-origin 50% top
		height 0

	.cabin--base
		circle cabinSize
		position absolute
		background-color white
		z-index 1


/* 0615c5aa8e19a9ef7fd683703b0e808a */
.roller-coaster-b
	min-height 540px
	svg
		display block
		float left
	.svg-graphs
		right -320px
	.marker-circle
		stroke-width 2px
		transition all .25s linear
		&.is-no-stroke
			stroke-width 0
	.axe-line
		stroke-width 5px
		stroke #287e7b
	.line
		stroke-width 4px
		stroke #54abaa
	.line1
		stroke #3da09f
	.check-pattern
		stroke #54abaa
	.check-pattern1
		stroke #3da09f
	text
		font-size 40px
		fill white
		openSans()

	.svg-cabin-wheel
		fill #277877
	.svg-cabin-base
		fill #4CBBBB
	.svg-cabin-base2
		fill #79C8D1
	.svg-cabin-base3
		fill #399695
	.svg-cabin-human
		fill #43A4A3

/* 25a33a14be99e39961e243eab6dfb19b */
.bush-b
	rect  128px
	position relative

	/* e5c0c4aae260971b6410a1216ff32039 */
	&.is-x2
		rect 256px
	/* c365ec5c7c6143e47a739146d5111f64 */
	&.is-flip
		> .part1-be
			left 22.6%
			right auto
		> .part2-be
			left 6.25%
			right auto
		> .part3-be
			left  0
			right auto
		> .part4-be
			right 21.28%
			left auto
		> .part5-be
			right 0
			left auto
		> .part6-be
			right 16.4%
			left auto


	/* e70e31679c4cce7614c34d818c82a2af */
	&.is-light
		> .part-be
			background-color #9ed355
			background-attachment fixed

	> .part-be
		border-radius 50%
		rect 35%
		position absolute
		background url('i/curtain-dots-bg3.png') repeat
		background-color #98bb69 
		background-attachment fixed

	> .part1-be
		top 0
		right 22.6%

	> .part2-be
		rect  23.4%
		top   20.3%
		right 6.25%

	> .part3-be
		rect 37.5%
		top  37.5%
		right  0

	> .part4-be
		rect 30.5%
		top  9.3%
		left 21.28%

	> .part5-be
		rect 37.5%
		left 0
		top 37.5%

	> .part6-be
		rect 23.4%
		left 16.4%
		top  23.4%

	> .part7-be
		rect 60%
		left 50%
		top  50%
		margin-left -30%
		margin-top  -30%
		

/* a68031dbfa095d64fc9b89f0a89b3173 */
.ribbon-b
	height 51px
	// width 500px
	background #f9f0dd
	position relative
	display inline-block

	> .text-be
		font-size 22px
		font-family sans-serif
		// openSans()
		line-height 51px
		padding-left 16px
		color darken(#64c2c1, 30)
		z-index 2
		position relative
		white-space nowrap
		padding-right 16px

	> .rope-be
		height 2px
		width  90px
		position absolute
		background #f9f0dd
		left -88px
		transform rotate(-16deg)
		top 12px

	> .rope2-be
		height 2px
		width  90px
		position absolute
		background #f9f0dd
		left -88px
		transform rotate(16deg)
		bottom 12px

	> .tale-be
		position absolute
		right -26px
		top 0
		border 26px solid transparent
		border-top-color #f9f0dd

	> .tale2-be
		position absolute
		right -26px
		bottom 0
		border 26px solid transparent
		border-bottom-color #f9f0dd

.building-b
	background #64c2c1
	// background-size 100% auto
	width 5.5%
	height 50%
	position relative
	border 8px solid transparent
	// &:after
	// 	content ''
	// 	position absolute
	// 	width 5%
	// 	height 100%
	// 	background-color inherit
	// 	ne 0
	// 	right -1px

	// .building-b--window
	// 	background-color transparent
	// 	float left 
	// 	rect 8px
	// 	margin-left 5%
	// 	margin-top 5px
	// 	position relative
	// 	z-index 2

	> .text-be
		font-size 26px
		color white
		font-weight 100
		text-align center
		position absolute
		width 100%
		top   -35px
		z-index 1
		// text-shadow 0 0 10px white
		text-shadow 0 0 6px white
		opacity 0
		transition opacity .2s linear

	> .tip-be
			position absolute
			display block
			top 0
			left 50%
			margin-left - 10px
			rect 0
			border 10px solid rgba(#64c2c1,0)
			border-bottom 90px solid #64c2c1
			z-index 0
			transition top .5s ease-out
			display none

	&.is-tip.curtain3-building7-lh
		> .tip-be
			top - 100px
			display block
		
	&.is-show-label
		> .text-be
			opacity 1
			animation fadeOutTopRight 1s linear
			transition-duration 0
			animation-delay 3s
			-webkit-animation-fill-mode both
			animation-fill-mode both

	&.is-hide-label
		> .text-be
			opacity 0
			animation none
			transition none
			

/* 4cbf1f487e13aad9100b274a119b2453 */
.cloud-b
	position relative
	width  114px
	height 52px 
	transform scale(1.5)

	.circle-be
		border-radius 50%
		background #f9f0dd
		rect 49px
		position absolute
		transition all .5s ease-in
		transform scale(0)
		&.is-1
			right 25px
			top 0
		&.is-2
			rect 35px
			right 0
			bottom 0
		&.is-3
			rect 26px
			left 16px
			bottom 8px
		&.is-4
			rect 20px
			left 0
			bottom 0
		&.is-5
			rect 20px
			left 30px
			bottom 5px
	
	.base-be
		background #f9f0dd
		// background red
		bottom 10px
		border-radius 20px
		width 75%
		height 15px
		position absolute
		transform scale(0)
		transition all .5s ease-out
		left 40px
		rect 20px
	
	.base2-be
		bottom 6px
		left   14px
		rect 	 10px

	&.is-anima
		.circle-be
			transform scale(1)
			-webkit-transition-timing-function cubic-bezier(0.545, 0.380, 0.465, 1)
			transition-timing-function cubic-bezier(0.545, 0.380, 0.465, 1.540)

		.base-be
			width 78%
			height 10px
			bottom 0
			left 8px
			transform scale(1)
			transition all .4s linear, bottom .5s cubic-bezier(0.545, 0.380, 0.465, 1.540)
		
		.base2-be
			bottom 6px
			left   14px
			rect 	 10px

	
.cloud2-b
	@extend .cloud-b
	.circle-be	
		&.is-1
			rect 50px
			right 14px
			top  1px

		&.is-2
			rect  36px

		&.is-3
			rect  30px
			left  28px
			top   22px

		&.is-4
			left  10px

	.base-be
		bottom 10px
		left 50px
	
	&.is-anima

		.base-be
			// background red
			left 18px
			width 70%
			bottom 0

		.base2-be
			rect 10px
			left 48px
			bottom 15px









